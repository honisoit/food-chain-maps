<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.40.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.40.1/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; height:500px;}
        #map { position:absolute; top:0; bottom:0; width:100%; }

    </style>
</head>
<body>
<style>
    #menu {
        background: #fff;
        position: absolute;
        z-index: 1;
        top: 10px;
        right: 10px;
        border-radius: 3px;
        width: 120px;
        border: 1px solid rgba(0,0,0,0.4);
        font-family: 'Roboto', sans-serif;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    #menu a {
        font-size: 10px;
        color: #404040;
        display: block;
        margin: 0;
        padding: 0;
        padding: 6px;
        text-decoration: none;
        border-bottom: 1px solid rgba(0,0,0,0.25);
        text-align: center;
    }

    #menu a:last-child {
        border: none;
    }

    #menu a:hover {
        background-color: #f8f8f8;
        color: #404040;
    }

    #menu a.active {
        background-color: #3887be;
        color: #ffffff;
    }

    #menu a.active:hover {
        background: #3074a4;
    }
</style>
<div class="wrapper">
  <nav id="menu"></nav>
  <div id="map" style="width:100%;height:auto;"></div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibmF0YXNzaWF6YyIsImEiOiJjajdtdW5xaTEzMmZiMzJucHI5aDA3amdjIn0.KNKEfsBxbUQsOSrw6i9ZxQ';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [151.094, -33.87], // starting position [lng, lat]
    zoom: 9 // starting zoom
});

map.on('load', function () {
    /*
     * 1. We need a map.addSource and map.addLayer function for each tileset
     * 2. Change rich in the first line of addSource to whatever makes sense
     */
    map.addSource('rich', {
        type: 'vector',
        // 3. Switch the url to the new tileset URL
        url: 'mapbox://natassiazc.cj7p7871x06fg33qr8xat1j7c-26mzb'
    });
    map.addLayer({
        // 4. Change 'Richest Postcodes' to whatever you want the tilesets button to read
        'id': 'Richest Postcodes',
        // 5. Leave type as 'circle' for points; change to 'fill' for a polygon like in the chargrill charlies section
        'type': 'fill',
        // 6. Change 'rich' to match what you changed it to in step two for the addSource function
        'source': 'rich',
        'layout': {
            'visibility': 'none'
        },
        // 7. Set the styling by changing the values of the 'circle-radius' and 'circle-color'
        // If you set the type to 'fill' for a polygon then use 'fill-color' and
        // 'fill-outline-color' like in the Chargrill Charlies section
        'paint': {
          'fill-color': 'rgba(165,70,86,0.34)',
          'fill-outline-color': 'rgba(165,70,86,0.34)',
        },
        // 9. Change 'Richest_Postcodes' to the name of the layer in the tileset
        'source-layer': 'Richest_Postcodes'
    });

    map.addSource('chargrill', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7oom8gk3kdu33nps04dzn9b-1fzkr'
    });
    map.addLayer({
        'id': 'Chargrill Charlies',
        'type': 'fill',
        'source': 'chargrill',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
          'fill-color': 'rgba(247,92,100,0.3)',
          'fill-outline-color': 'rgba(247,92,100,0.3)',
        },
        'source-layer': 'Chargrill_Charlies'
    });

    map.addSource('outback', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7ohmut63iis2wo2op1ygqjv-0zoh1'
    });
    map.addLayer({
        'id': 'Outback Steakhouse',
        'type': 'fill',
        'source': 'outback',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
          'fill-color': 'rgba(40,100,100,0.25)',
         'fill-outline-color': 'rgba(40,100,100,0.25)',

        },
        'source-layer': 'Outback_Steakhouse'
    });

    map.addSource('rooster', {
    type: 'vector',
    url: 'mapbox://natassiazc.cj7oo8bqh3kpb2wo25o52snmq-1rotn'
    });
    map.addLayer({
        'id': 'The Red Rooster Line',
        'type': 'line',
        'source': 'rooster',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
        },
        'source-layer': 'Red_Rooster_Line'
    });

    map.addSource('wendys', {
    type: 'vector',
    url: 'mapbox://natassiazc.cj7mxvhxs32ox33lxovibjjq8-0t1s0'
    });
    map.addLayer({
        'id': 'Wendys',
        'type': 'fill',
        'source': 'wendys',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'fill-color': 'rgba(282,70,91,0.28)',
            'fill-outline-color': 'rgba(282,70,91,0.28)',
        },
        'source-layer': 'Wendys_'
    });

    map.addSource('hogs', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7ogu1523j5c32npdg1v5fwj-85bmo'
    });
    map.addLayer({
        'id': 'Hogs Australian Steakhouse',
        'type': 'fill',
        'source': 'hogs',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'fill-color': 'rgba(105,88,100,0.28)',
            'fill-outline-color': 'rgba(105,88,100,0.28)',
        },
        'source-layer': 'Hoggies'
    });

    map.addSource('bourke', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7of3ekf1ubp32rre752yb6b-8aks4'
    });
    map.addLayer({
        'id': 'Bourke Street Bakery',
        'type': 'fill',
        'source': 'bourke',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'fill-color': 'rgba(307,100,100,0.3)',
            'fill-outline-color': 'rgba(307,100,100,0.3)',
        },
        'source-layer': 'Bourke_St_Bakery'
    });

    map.addSource('harris', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7muzz081bw833t6oi0rgdgu-3c8j9'
    });
    map.addLayer({
        'id': 'Harris Farm Markets',
        'type': 'fill',
        'source': 'harris',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'fill-color': 'rgba(56,83,32,0.2)',
            'fill-outline-color': 'rgba(56,83,32,0.2)',
        },
        'source-layer': 'Harris_Farm'
    });

    map.addSource('doughnut', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7o5kvrf3etl33lxklqy7zn0-1shhf'
    });
    map.addLayer({
        'id': 'Doughnut Time',
        'type': 'fill',
        'source': 'doughnut',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'fill-color': 'rgba(114,100,86,0.2)',
            'fill-outline-color': 'rgba(114,100,86,0.2)',
        },
        'source-layer': 'Doughnut_Time'
    });

    map.addSource('jannah', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7mxte7s32l22qo2wgkvb1uu-0ptjv'
    });
    map.addLayer({
        'id': 'El Jannah',
        'type': 'fill',
        'source': 'jannah',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'fill-color': 'rgba(185,98,100,0.3)',
            'fill-outline-color': 'rgba(185,98,100,0.3)',
        },
        'source-layer': 'El_Jannah'
    });

    map.addSource('rashays', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7mvsbri07yi32u9dcgraai9-0yq2k'
    });
    map.addLayer({
        'id': 'Rashays',
        'type': 'fill',
        'source': 'rashays',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'fill-color': 'rgba(354,100,100,0.2)',
            'fill-outline-color': 'rgba(354,100,100,0.2)',
        },
        'source-layer': 'Rashays'
    });

    map.addSource('messina', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7ob59z80oi12qu9s653zzkx-9nluk'
    });
    map.addLayer({
        'id': 'Gelato Messina',
        'type': 'circle',
        'source': 'messina',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'circle-radius': 3,
            'circle-color': 'rgba(86,98,100,1)',
        },
        'source-layer': 'Messina'
    });

    map.addSource('bailey', {
        type: 'vector',
        url: 'mapbox://natassiazc.cj7oakt911pzk33rrvdmzpnnp-9o9by'
    });
    map.addLayer({
        'id': 'Bailey Nelson',
        'type': 'circle',
        'source': 'bailey',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'circle-radius': 3,
            'circle-color': 'rgba(0,0,42,1)',
        },
        'source-layer': 'Bailey_Nelson'
    });

    map.addSource('iku', {
            type: 'vector',
            url: 'mapbox://natassiazc.cj7vvhn75324q2wo36v0gezia-7w74m'
        });
    map.addLayer({
        'id': 'Iku Wholefood',
        'type': 'fill',
        'source': 'iku',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'fill-color': 'rgba(26,85,96,0.25)',
            'fill-outline-color': 'rgba(26,85,96,0.25)',
        },
        'source-layer': 'Iku_Wholefood'
    });

        map.addSource('poor', {
                type: 'vector',
                url: 'mapbox://natassiazc.cj7vv210w0ex82yp8ypqhcerq-4k33x'
            });
            map.addLayer({
                'id': 'Poorest Postcodes',
                'type': 'fill',
                'source': 'poor',
                'layout': {
                    'visibility': 'none'
                },
                'paint': {
                    'fill-color': 'rgba(151,85,35,0.4)',
                    'fill-outline-color': 'rgba(151,85,35,0.4)',
                },
                'source-layer': 'Poorest_Suburbs'
            });

// 9. Add the id you set in step 4 to this list
var toggleableLayerIds = [
  'Richest Postcodes',
  'Poorest Postcodes',
  'Outback Steakhouse',
  'Chargrill Charlies',
  'The Red Rooster Line',
  'Wendys',
  'Hogs Australian Steakhouse',
  'Bourke Street Bakery',
  'Harris Farm Markets',
  'Iku Wholefood',
  'Doughnut Time',
  'El Jannah',
  'Rashays',
  'Gelato Messina',
  'Bailey Nelson'
];

for (var i = 0; i < toggleableLayerIds.length; i++) {
    var id = toggleableLayerIds[i];

    var link = document.createElement('a');
    link.href = '#';
    link.className = '';
    link.textContent = id;

    link.onclick = function (e) {
        var clickedLayer = this.textContent;
        e.preventDefault();
        e.stopPropagation();

        var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

        if (visibility === 'visible') {
            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
            this.className = '';
        } else {
            this.className = 'active';
            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
        }
    };

    var layers = document.getElementById('menu');
    layers.appendChild(link);
}
});

</script>
<script type="text/javascript" src="https://pym.nprapps.org/pym.v1.min.js"></script>
<script type="text/javascript">
  console.log('log');
  const pymChild = new pym.Child();
  pymChild.sendHeight({ polling: 500 });
</script>
</body>
</html>
